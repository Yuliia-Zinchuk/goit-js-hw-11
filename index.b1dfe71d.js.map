{"mappings":"AAEA,MAAMA,EAAaC,SAASC,cAAc,gBACpCC,EAAmBF,SAASC,cAAc,YAC1CE,EAAiBH,SAASC,cAAc,6BAExCG,EAAoB,ICEX,MAMbC,gBAOE,MAEMC,EAAM,qEAA6CC,KAAKC,uFAA8CD,KAAKE,OAEjH,OAAOC,MAAMJ,GACVK,MAAKC,GAAKA,EAAEC,SACZF,MAAKG,IAEJP,KAAKQ,gBACLC,QAAQC,IAAI,gBAAiBV,MAEtBO,EAAKI,QAIlBH,gBACER,KAAKE,MAAQ,EAGfU,YACEZ,KAAKE,KAAO,EAGVW,YACF,OAAOb,KAAKC,YAEVY,UAAMC,GACRd,KAAKC,YAAca,EAvCrBC,cACEf,KAAKC,YAAc,GACnBD,KAAKE,KAAO,IDahB,SAASc,EAAmBL,GAC1BF,QAAQC,IAAIC,GACZ,MAAMM,EAAON,EACVO,KAAIC,GACI,6CACyBA,EAAIC,gEAClBD,EAAIE,sDAKvBC,KAAK,IAER3B,EAAiB4B,mBAAmB,YAAaN,GA9BnDR,QAAQC,IAAIb,GAEZL,EAAWgC,iBAAiB,UAG5B,SAAkBC,GAChBA,EAAIC,iBAEJ7B,EAAkBI,YAAcwB,EAAIE,cAAcC,SAAS3B,YAAY4B,MACvEhC,EAAkBe,YAClBf,EAAkBC,gBAAgBM,KAAKY,MAPzCpB,EAAe4B,iBAAiB,SAUhC,WACE3B,EAAkBC,gBAAgBM,KAAKY","sources":["src/index.js","src/galleryServiceAPI.js"],"sourcesContent":["import GalleryApiService from './galleryServiceAPI';\n\nconst searchForm = document.querySelector('.search-form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('[data-action=\"load-more\"]');\n\nconst galleryApiService = new GalleryApiService();\nconsole.log(galleryApiService);\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nfunction onSearch(evt) {\n  evt.preventDefault();\n\n  galleryApiService.searchQuery = evt.currentTarget.elements.searchQuery.value;\n  galleryApiService.resetPage();\n  galleryApiService.fetchPictures().then(renderPicturesList);\n}\n\nfunction onLoadMore() {\n  galleryApiService.fetchPictures().then(renderPicturesList);\n}\n\nfunction renderPicturesList(hits) {\n  console.log(hits);\n  const list = hits\n    .map(hit => {\n      return `<li>\n          <img class=\"picture\" src=\"${hit.largeImageURL}\" alt=\"flag\" width=\"60\">\n                  <h3>${hit.likes}</h3>\n\n                </li>\n            `;\n    })\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', list);\n}\n\n// const URL =\n//   'https://pixabay.com/api/?key=' +\n//   API_KEY +\n//   '&q=' +\n//   encodeURIComponent('red roses')$.getJSON(URL, function (data) {\n// //   if (parseInt(data.totalHits) > 0)\n//     $.each(data.hits, function (i, hit) {\n//       console.log(hit.pageURL);\n//     });\n//   else console.log('No hits');\n// });\n\n//fetch('https://pixabay.com/api/');\n\n// const fetchUsersBtn = document.querySelector('.text');\n// console.log(fetchUsersBtn);\n// //const userList = document.querySelector('.user-list');\n\n// fetchUsersBtn.addEventListener('submit', () => {\n//   fetchUsers()\n//     .then(users => renderUserList(users))\n\n//     .catch(error => console.log(error));\n\n//   console.log(98);\n// });\n\n// function fetchUsers() {\n//   return fetch('https://restcountries.com/v3.1/name').then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.status);\n//     }\n//     return response.json();\n//   });\n// }\n// console.log(999);\n// function renderUserList(users) {\n//   const markup = users\n//     .map(user => {\n//       return `<li>\n//           <p><b>Name</b>: ${user.name}</p>\n//           <p><b>Email</b>: ${user.email}</p>\n//           <p><b>Company</b>: ${user.company.name}</p>\n//         </li>`;\n//     })\n//     .join('');\n//   userList.innerHTML = markup;\n// }\n\n//\n// };\n","// key - твой уникальный ключ доступа к API.\n// q - термин для поиска. То, что будет вводить пользователь.\n// image_type - тип изображения. Мы хотим только фотографии, поэтому задай значение photo.\n// orientation - ориентация фотографии. Задай значение horizontal.\n//     safesearch - фильтр по возрасту.Задай значение true.\n\nconst fieldParams = 'image_type=photo&orientation=horizontal&safesearch=true';\n\nexport default class GalleryApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchPictures() {\n    //console.log('до запроса', this);\n    // const options = {\n    //     headers: {\n    //         Authorization: '29884579-b0e414ddacb31e478cf055115',\n    //     },\n    // };\n    const API_KEY = '29884579-b0e414ddacb31e478cf055115';\n\n    const url = `https://pixabay.com/api/?key=${API_KEY}&q=${this.searchQuery}&${fieldParams}&per_page=5&page=${this.page}`;\n\n    return fetch(url)\n      .then(r => r.json())\n      .then(data => {\n        //console.log(data);\n        this.incrementPage();\n        console.log('после запроса', this);\n\n        return data.hits;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n"],"names":["$1f0dc3b9307be026$var$searchForm","document","querySelector","$1f0dc3b9307be026$var$galleryContainer","$1f0dc3b9307be026$var$loadMoreButton","$1f0dc3b9307be026$var$galleryApiService","fetchPictures","url","this","searchQuery","page","fetch","then","r","json","data","incrementPage","console","log","hits","resetPage","query","newQuery","constructor","$1f0dc3b9307be026$var$renderPicturesList","list","map","hit","largeImageURL","likes","join","insertAdjacentHTML","addEventListener","evt","preventDefault","currentTarget","elements","value"],"version":3,"file":"index.b1dfe71d.js.map"}